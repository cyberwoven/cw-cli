
#!/bin/bash

# if the taskId file doesn't exist, exit
[ ! -f .taskId ] && exit 0;
# if the taskId is empty, exit
[ ! -s .taskId ] && exit 0;

source $HOME/.cw/default # ASSUMING this file exists on host

# read URL_PREFIX into a var
URL_PREFIX=$CWCLI_TASK_URL_PREFIX

# read taskID into a var
TASK_ID=$( < .taskId )

# read commit message into a var
COMMIT_MSG=$( < $1 )

# write the new commit message
cat << EOT > $1
$TASK_ID - $COMMIT_MSG

$URL_PREFIX$TASK_ID
